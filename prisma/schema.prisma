generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("MYSQL_URL")
}

model Users {
  id            String @id @default(uuid())
  email         String @unique
  password      String
  colaboradorId String @unique @map("colaborador_id")

  ativo     Boolean  @default(true)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @updatedAt @map("updated_at")

  Colaborador Colaborador @relation(fields: [colaboradorId], references: [id], onDelete: Cascade)
  sessions    Session[]

  @@map("users")
}

model Session {
  id           String @id @default(uuid())
  refreshToken String @db.VarChar(500)
  userId       String @map("user_id")

  ativo     Boolean  @default(true)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @updatedAt @map("updated_at")

  user Users @relation(fields: [userId], references: [id])

  @@index([userId], map: "sessions_user_id_fkey")
  @@map("sessions")
}

model Colaborador {
  id               String  @id @default(uuid())
  nome             String  @map("nome")
  cpf              String  @unique @map("cpf")
  dataDeNascimento String  @default("") @map("data_nascimento")
  telefone         String  @default("") @map("telefone")
  celular          String  @default("") @map("celular")
  email            String  @default("") @map("email")
  cargo            String  @map("cargo")
  curso            String? @map("curso")

  ativo     Boolean  @default(true)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @updatedAt @map("updated_at")

  User Users?

  @@index([cpf, nome, ativo])
  @@map("colaborador")
}

model Local {
  id   String @id @default(uuid())
  tipo String @map("tipo")
  numero Int @map("numero") 
  bloco String @map("bloco")

  
  @@map("local")
}
